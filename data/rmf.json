/*
  So we then have files for:
  - FileInfo
  - Nodes
  - NodeSets
  - subdir for category
     - static data for nodes
     - static data for node sets
     - dynamic data for nodes
     - dynamic data for node sets
*/

{
    "type": "record",
    "name": "File",
    "doc": "Store information about the whole RMF.",
    "fields" : [
        {
            "name": "description",
            "type": "string"
        },
        {
            "name": "version",
            "type": "int"
        },
        {
            "name": "number_of_frames",
            "doc": "The number of frames that have been completely written to the file."
            "type": "int"
        }
    ]
}


{
    "type": "record",
    "name": "Node",
    "doc": "Store the hierarchy as a hierarchy.",
    "fields" : [
        {
            "name": "name",
            "type": "string"
        },
        {
            "name": "index",
            "type": "int"
        },
        {
            "name": "type",
            "type": "string"
        },
        {
            "name": "children",
            "type": {
                "type": "array",
                "doc": "Store the indexes of the children nodes.",
                "items": "int"
            }
        }
    ]
}


{
    "type": "record",
    "name": "NodeSet",
    "doc": "Store the hierarchy of node sets.",
    "fields" : [
        {
            "name": "name",
            "type": "string"
        },
        {
            "name": "index",
            "type": "int"
        },
        {
            "name": "type",
            "type": "string"
        },
        {
            "name": "nodes",
            "type": {
                "type": "array",
                "doc": "Store the indexes of the contained nodes.",
                "items": "int"
            }
        }
        {
            "name": "children",
            "type": {
                "type": "array",
                "doc": "Store the indexes of the children nodes.",
                "items": "int"
            }
        }
    ]
}

{
    "type": "record",
    "name": "Data",
    "doc": "Store the data for a particular node. This is used for static and per-frame data.",
    "fields" : [
        {
            "name": "strings", "type":{
                "type": "map",
                "values": "string"
            }
        },
        {
            "name": "string_lists", "type":{
                "type": "map",
                "values": {
                    "type": "array",
                    "items": "string"
                }
            }
        }

  ]
}

{
    "type": "record",
    "name": "DataStorage",
    "doc": "Store the data for a set of entities (eg nodes), indexed by strings of the index.",
    "fields" : [
        {
            "name": "frame",
            "doc": "The frame this is for, or -1 if it is static data.",
            "type": "int"
        },
        {
            "name": "data",
            "doc": "The actual data",
            "type": {
                "type": "map",
                "values": "Data"
            }
        }
    ]
}